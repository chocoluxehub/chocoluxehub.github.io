<iframe src="data:text/html;charset=utf-8,<!DOCTYPE html>
<html>
<head>
    <title>Tic-Tac-Toe Game</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        #gameContainer { display: none; }
        #board { display: grid; grid-template-columns: repeat(3, 100px); grid-gap: 5px; width: 320px; margin: auto; }
        .cell { width: 100px; height: 100px; font-size: 36px; text-align: center; line-height: 100px; border: 2px solid black; cursor: pointer; }
        .hidden { display: none; }
        video { width: 790px; height: 500px; }
    </style>
</head>
<body>

    <!-- Video 1 (Plays randomly every few games) -->
    <video id="video1" class="hidden" autoplay muted playsinline onclick="window.location.href='https://helloukchocoluxe.wixsite.com/en-uk/';">
        <source src="https://www.dropbox.com/s/m4r2np2zsg1747k/Add%20a%20heading%20(1).mp4?raw=1" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- Video 2 (Plays only once before first game) -->
    <video id="video2" autoplay muted playsinline onended="startGame()">
        <source src="https://www.dropbox.com/s/voq8pmp3tootn3s/Powered%20By%20(1).mp4?raw=1" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- Game Container -->
    <div id="gameContainer">
        <h1>Tic-Tac-Toe</h1>
        <p>Pick the CPU's color:</p>
        <button onclick="setCPUColor('brown')">Brown</button>
        <button onclick="setCPUColor('pink')">Pink</button>
        <div id="board"></div>
    </div>

    <script>
        let board = ["", "", "", "", "", "", "", "", ""];
        let currentPlayer = "X";
        let cpuColor = "brown";
        let gameOver = false;
        let gameCount = 0;

        function startGame() {
            document.getElementById("video2").classList.add("hidden");
            document.getElementById("gameContainer").style.display = "block";
            initializeBoard();
        }

        function setCPUColor(color) {
            cpuColor = color;
            initializeBoard();
        }

        function initializeBoard() {
            document.getElementById("board").innerHTML = ""; 
            board = ["", "", "", "", "", "", "", "", ""];
            gameOver = false;
            currentPlayer = "X";

            for (let i = 0; i < 9; i++) {
                let cell = document.createElement("div");
                cell.classList.add("cell");
                cell.setAttribute("onclick", `makeMove(${i})`);
                document.getElementById("board").appendChild(cell);
            }
        }

        function makeMove(index) {
            if (board[index] === "" && !gameOver) {
                board[index] = currentPlayer;
                updateBoard();

                if (checkWin()) {
                    setTimeout(() => {
                        alert(currentPlayer === "X" ? "You Win!" : "Game Over!");
                        restartGame();
                    }, 300);
                    return;
                }

                currentPlayer = currentPlayer === "X" ? "O" : "X";

                if (currentPlayer === "O") {
                    setTimeout(cpuMove, 500);
                }
            }
        }

        function cpuMove() {
            let availableMoves = board.map((v, i) => (v === "" ? i : null)).filter(v => v !== null);
            if (availableMoves.length > 0) {
                let move = availableMoves[Math.floor(Math.random() * availableMoves.length)];
                board[move] = "O";
                updateBoard();

                if (checkWin()) {
                    setTimeout(() => {
                        alert("Game Over!");
                        restartGame();
                    }, 300);
                }

                currentPlayer = "X";
            }
        }

        function updateBoard() {
            let cells = document.getElementsByClassName("cell");
            for (let i = 0; i < 9; i++) {
                cells[i].innerHTML = board[i];
                cells[i].style.color = board[i] === "O" ? cpuColor : "black";
            }
        }

        function checkWin() {
            const winningCombos = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
                [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
                [0, 4, 8], [2, 4, 6] // Diagonals
            ];

            return winningCombos.some(combo =>
                board[combo[0]] !== "" &&
                board[combo[0]] === board[combo[1]] &&
                board[combo[1]] === board[combo[2]]
            );
        }

        function restartGame() {
            gameCount++;
            let showVideo1 = Math.random() < 0.3; // 30% chance to show Video 1 every few games

            setTimeout(() => {
                if (showVideo1) {
                    document.getElementById("gameContainer").style.display = "none";
                    document.getElementById("video1").classList.remove("hidden");

                    document.getElementById("video1").onended = () => {
                        document.getElementById("video1").classList.add("hidden");
                        document.getElementById("gameContainer").style.display = "block";
                        initializeBoard();
                    };
                } else {
                    initializeBoard();
                }
            }, 500); // Short delay before restarting to prevent flicker
        }
    </script>

</body>
</html>" width="790" height="500"></iframe>
